
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HS64 Electrical Stimulator &#8212; ONIX Docs 0.0.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/copyURLToClipboard.js"></script>
    <script src="http://wavedrom.com/skins/default.js"></script>
    <script src="http://wavedrom.com/wavedrom.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="HS64 Optical Stimulator" href="ostim-hs64.html" />
    <link rel="prev" title="Neuropixels V1" href="neuropixels-v1.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/onix_open_ephys_logo.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../About/index.html">About</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html"> Hardware Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../API%20Reference/index.html"> API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Software%20Guide/index.html"> Software Guide</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://open-ephys.org">Open Ephys<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys/onix-docs" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
          
            
                <li class="">
                    <a href="../hw-repo-info.html">Repository Information</a>
                </li>
            
          
            
                <li class="">
                    <a href="../hw-compatibility.html">Version Compatibility</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">Device Datasheets</a>
                    <ul>
                    
                        <li class="">
                            <a href="heartbeat.html">Heartbeat</a>
                        </li>
                    
                        <li class="">
                            <a href="load-test.html">Load Test Device</a>
                        </li>
                    
                        <li class="">
                            <a href="memory-usage.html">Memory Usage Monitor</a>
                        </li>
                    
                        <li class="">
                            <a href="fmc-analog-io.html">FMC Host Analog IO Device</a>
                        </li>
                    
                        <li class="">
                            <a href="fmc-digital-io.html">FMC Host Digital IO Device</a>
                        </li>
                    
                        <li class="">
                            <a href="fmc-clock-out.html">FMC Host Clock Output Device</a>
                        </li>
                    
                        <li class="">
                            <a href="fmc-link-control.html">FMC Link Controller</a>
                        </li>
                    
                        <li class="">
                            <a href="bno055.html">BNO055</a>
                        </li>
                    
                        <li class="">
                            <a href="rhd2164.html">RHD2164</a>
                        </li>
                    
                        <li class="">
                            <a href="neuropixels-v1.html">Neuropixels V1</a>
                        </li>
                    
                        <li class="active">
                            <a href="">HS64 Electrical Stimulator</a>
                        </li>
                    
                        <li class="">
                            <a href="ostim-hs64.html">HS64 Optical Stimulator</a>
                        </li>
                    
                        <li class="">
                            <a href="ts4231-v1-array.html">TS4231 Array for V1 Base Stations</a>
                        </li>
                    
                        <li class="">
                            <a href="ds90ub9x-raw.html">DS90UB9X Raw Device</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../Coaxial%20Headstages/index.html">Coaxial Headstages</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Miniscopes/index.html">Miniscopes</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Adapters%20%26%20EIBs/index.html">Adapters & EIBs</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Breakout%20Boards/index.html">Breakout Boards</a>
                </li>
            
          
            
                <li class="">
                    <a href="../PCIe%20Host/index.html">PCIe Host</a>
                </li>
            
          
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#description" class="nav-link">Description</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#register-programming" class="nav-link">Register Programming</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#device-to-host-data-frames" class="nav-link">Device To Host Data Frames</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#host-to-device-data-frames" class="nav-link">Host To Device Data Frames</a>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/open-ephys/onix-docs/edit/master/source/Hardware Guide/Datasheets/estim-hs64.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="hs64-electrical-stimulator">
<span id="estim-hs64"></span><h1>HS64 Electrical Stimulator<a class="headerlink" href="#hs64-electrical-stimulator" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Authors</dt>
<dd class="field-odd"><p>Jie (Jack) Zhang &amp; Jonathan P. Newman</p>
</dd>
<dt class="field-even">IO</dt>
<dd class="field-even"><p>Register Access</p>
</dd>
<dt class="field-odd">ONIX ID</dt>
<dd class="field-odd"><p>4</p>
</dd>
<dt class="field-even">ONIX Hubs</dt>
<dd class="field-even"><p><a class="reference internal" href="../Coaxial%20Headstages/headstage-64_1r3.html#headstage-64-1r3"><span class="std std-ref">headstage-64 v1.3</span></a></p>
</dd>
</dl>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong>HS64 Electrical Stimulator</strong> is a combined precision bipolar current
source and sequencer for generating electrical stimuli. The circuit consists of
an enhanced Howland current pump driven by a DAC. A bipolar 15 volt supply is
provided by a dual boost/boost-inverting switching regulator. This regulator
is only enabled during stimulation epochs in order to minimize switching noise
on analog traces. A dual-channel bipolar analog switch sits between the
stimulator output and stimulation electrode. Outside of stimulus pulses, it
shorts the stimulation electrode to ground to prevent electrolysis due to
charge imbalance and sends the stimulator output through a shunt resistor to
prevent accumulation of large output voltage due to slight offsets and
component mismatch.</p>
<p>Component values have been chosen to optimize circuit stability over a wide
range of electrode impedances. Operation remains stable for macroelectrodes
(e.g. low-impedance cut stainless-steel wire and microelectrodes up to 1 MOhm
at 1kHz). The circuit can produce up to 2.5 mA of bipolar current within the
bounds of its ±15V compliance voltage range. Although this circuit consists of
multiple components, the firmware permits operation, via register programming,
that is very similar to a Master8 or <a class="reference external" href="https://open-ephys.org/pulsepal">PulsePal</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This device contains power generation circuitry that operates correctly
within a relatively narrow range of input voltages. Make sure your
headstage voltage is within spec or this device may produce incorrect
stimulus amplitudes.</p>
</div>
</div>
<div class="section" id="register-programming">
<h2>Register Programming<a class="headerlink" href="#register-programming" title="Permalink to this headline">¶</a></h2>
<p>Register IO is detailed in the table below.</p>
<table class="colwidths-auto table" id="estim-hs64-regs">
<caption><span class="caption-text">HS64 Electrical Stimulator Registers</span><a class="headerlink" href="#estim-hs64-regs" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Address</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Time of Effect</p></th>
<th class="head"><p>POR Value</p></th>
<th class="head"><p>Reset Action</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x00</p></td>
<td><p>NULLPARM</p></td>
<td><p>R</p></td>
<td><p>N/A</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>No command</p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p>BIPHASIC</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>1</p></td>
<td><p>None</p></td>
<td><p>Biphasic pulse (0 = monophasic, 1 = biphasic)</p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p>CURRENT1</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>2^(DACREZ - 1)</p></td>
<td><p>None</p></td>
<td><p>Phase 1 current. See <a class="reference internal" href="#equation-ctoi">(1)</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>0x03</p></td>
<td><p>CURRENT2</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Phase 2 current. See <a class="reference internal" href="#equation-ctoi">(1)</a>.</p></td>
</tr>
<tr class="row-even"><td><p>0x04</p></td>
<td><p>PULSEDUR1</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>100</p></td>
<td><p>None</p></td>
<td><p>Phase 1 duration, microseconds</p></td>
</tr>
<tr class="row-odd"><td><p>0x05</p></td>
<td><p>IPI</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Inter-phase interval, microseconds</p></td>
</tr>
<tr class="row-even"><td><p>0x06</p></td>
<td><p>PULSEDUR2</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>100</p></td>
<td><p>None</p></td>
<td><p>Phase 2 duration, microseconds</p></td>
</tr>
<tr class="row-odd"><td><p>0x07</p></td>
<td><p>PULSEPERIOD</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>10000</p></td>
<td><p>None</p></td>
<td><p>Inter-pulse interval, microseconds</p></td>
</tr>
<tr class="row-even"><td><p>0x08</p></td>
<td><p>BURSTCNT</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>10</p></td>
<td><p>None</p></td>
<td><p>Burst counts, number of pulses</p></td>
</tr>
<tr class="row-odd"><td><p>0x09</p></td>
<td><p>IBI</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Inter-burst interval, microseconds</p></td>
</tr>
<tr class="row-even"><td><p>0x0a</p></td>
<td><p>TRAINCNT</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>1</p></td>
<td><p>None</p></td>
<td><p>Pulse train counts, number of bursts</p></td>
</tr>
<tr class="row-odd"><td><p>0x0b</p></td>
<td><p>TRAINDELAY</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Pulse train delay, microseconds</p></td>
</tr>
<tr class="row-even"><td><p>0x0c</p></td>
<td><p>TRIGGER</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>Trigger stimulation (0 = off, else = deliver continuously)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0d</p></td>
<td><p>POWERON</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Toggle estim power to reduce noise when not in use (0 = off, 1 = on)</p></td>
</tr>
<tr class="row-even"><td><p>0x0e</p></td>
<td><p>ENABLE</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1: enables the stimulator, 0: stimulator ignores triggers (so that a
common trigger can be used)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0f</p></td>
<td><p>RESTCURRENT</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>2^(DACREZ - 1)</p></td>
<td><p>None</p></td>
<td><p>Resting current between pulse phases. See <a class="reference internal" href="#equation-ctoi">(1)</a>.</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>MASTERRESET</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Reset all parameters to default</p></td>
</tr>
<tr class="row-odd"><td><p>0x11</p></td>
<td><p>DACREZ</p></td>
<td><p>R</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
<td><p>None</p></td>
<td><p>Internal DAC resolution in bits, which is a hard-coded circuit
parameter.</p></td>
</tr>
</tbody>
</table>
<p>A graphical register definitions are provided in the following diagrams:</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/estim-hs64_parameters.png"><img alt="../../_images/estim-hs64_parameters.png" src="../../_images/estim-hs64_parameters.png" style="width: 502.5px; height: 504.5px;" /></a>
<p class="caption"><span class="caption-text">A diagram of the stimulus parameters presented in the
<a class="reference internal" href="#estim-hs64-regs"><span class="std std-ref">HS64 Electrical Stimulator Registers</span></a> table.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>For registers specifying electrical current, the following transform applies:</p>
<div class="math notranslate nohighlight" id="equation-ctoi">
<span class="eqno">(1)<a class="headerlink" href="#equation-ctoi" title="Permalink to this equation">¶</a></span>\[I_{stim} = Code * \frac{5 mA}{(2^N - 1)} - 2.5 mA\]</div>
<p>where <em>N</em> specifies the bit resolution of the circuit’s DAC, which is made
available in the DACREZ register.</p>
</div>
<div class="section" id="device-to-host-data-frames">
<h2>Device To Host Data Frames<a class="headerlink" href="#device-to-host-data-frames" title="Permalink to this headline">¶</a></h2>
<p>No frames are transmitted to the host.</p>
</div>
<div class="section" id="host-to-device-data-frames">
<h2>Host To Device Data Frames<a class="headerlink" href="#host-to-device-data-frames" title="Permalink to this headline">¶</a></h2>
<p>This device does not accept input frames. All write attempts will fail with an
error.</p>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="neuropixels-v1.html" title="previous page">Neuropixels V1</a>
    <a class='right-next' id="next-link" href="ostim-hs64.html" title="next page">HS64 Optical Stimulator</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>