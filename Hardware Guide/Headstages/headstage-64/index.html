
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Headstage-64 &#8212; Open Ephys ONIX  documentation</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/blank.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/copyURLToClipboard.js"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Test Board for Headstage-64" href="test-board-64.html" />
    <link rel="prev" title="Making Coaxial Tethers" href="../tethers.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/onix_open_ephys_logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../Getting%20Started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../index.html">
  Hardware Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../API%20Reference/index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../Software%20Guide/index.html">
  Software Guide
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://open-ephys.org">Open Ephys<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/open-ephys/onix-docs" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/openephys" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://open-ephys.slack.com" rel="noopener" target="_blank" title="Slack">
            <span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../PCIe%20Host/index.html">
   PCIe Host
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../PCIe%20Host/overview.html">
     Overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../PCIe%20Host/setup-windows.html">
     Setup Guide for Windows
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../PCIe%20Host/gateware-drivers.html">
     Gateware and Device Drivers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../PCIe%20Host/multi-board-sync.html">
     Synchronizing Multiple PCIe Hosts
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../Breakout%20Board/index.html">
   Breakout Board
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Breakout%20Board/setup.html">
     Setup
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Headstages
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../setup.html">
     Setup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../serialization.html">
     Coaxial Data Serialization &amp; Power
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tethers.html">
     Making Coaxial Tethers
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="current reference internal" href="#">
     Headstage-64
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="test-board-64.html">
       Test Board for Headstage-64
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../headstage-neuropix.html">
     Neuropixels-1.0 Headstage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tether-voltage.html">
     Tethered Headstage Voltages
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Miniscopes/index.html">
   Miniscopes
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../Commutators/index.html">
   Coaxial Commutators
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Commutators/setup.html">
     Setup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Commutators/usage.html">
     Usage
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../Lighthouses/index.html">
   3D-Tracking Lighthouses
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Lighthouses/setup.html">
     Setup
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../Adapters%20%26%20EIBs/index.html">
   Adapters &amp; EIBs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Adapters%20%26%20EIBs/eib-64.html">
     EIB-64
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Adapters%20%26%20EIBs/eib-64-large.html">
     EIB-64L
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Adapters%20%26%20EIBs/omnetics-adapter-64.html">
     64-Channel Omnetics Adpater
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Adapters%20%26%20EIBs/nano-z-adapter-64.html">
     64-Channel Nano-Z Adapter
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../Datasheets/index.html">
   ONI Datasheets
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/heartbeat.html">
     Heartbeat
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/load-test.html">
     Load Test Device
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/memory-usage.html">
     Memory Usage Monitor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/fmc-analog-io.html">
     FMC Host Analog IO Device
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/fmc-digital-io.html">
     FMC Host Digital IO Device
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/fmc-clock-out.html">
     FMC Host Clock Output Device
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/fmc-link-control.html">
     FMC Link Controller
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/bno055.html">
     BNO055
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/rhd2164.html">
     RHD2164
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/estim-hs64.html">
     HS64 Electrical Stimulator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/ostim-hs64.html">
     HS64 Optical Stimulator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/ts4231-v1-array.html">
     TS4231 Array for V1 Base Stations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/neuropixels-v1.html">
     Neuropixels V1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Datasheets/ds90ub9x-raw.html">
     DS90UB9X Raw Device
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Connections%20%26%20Cables/index.html">
   Connections and Cables
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#electrophysiology">
   Electrophysiology
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#d-position-tracking">
   3D Position Tracking
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#d-orientation-tracking">
   3D Orientation Tracking
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#neural-stimulation">
   Neural Stimulation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optical-stimulation">
     Optical Stimulation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#electical-stimulation">
     Electical Stimulation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#schematic">
   Schematic
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#gerber-files">
   Gerber Files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bill-of-materials">
   Bill of Materials
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fpga-bottom-connector-pinouts">
   FPGA &amp; Bottom Connector Pinouts
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/open-ephys/onix-docs/edit/main/source/Hardware Guide/Headstages/headstage-64/index.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="headstage-64">
<span id="id1"></span><h1>Headstage-64<a class="headerlink" href="#headstage-64" title="Permalink to this headline">¶</a></h1>
<p><strong>Headstage-64</strong> is a serialized, multifunction headstage
for small animals. This headstage is designed to function with
<a class="reference internal" href="../../Adapters%20%26%20EIBs/eib-64.html#eib-64"><span class="std std-ref">EIB-64</span></a> for <a class="reference external" href="https://open-ephys.org/shuttledrive">tetrode microdrives</a>. Alternatively it can be used with
other passive probes (e.g. silicon arrays, EEG/ECOG arrays, etc) using
<a class="reference internal" href="../../Adapters%20%26%20EIBs/omnetics-adapter-64.html#omnetics-adapter-64"><span class="std std-ref">64-Channel Omnetics Adpater</span></a> or similar.</p>
<img alt="ONIX Headstage-64 v1.3" class="align-center" src="../../../_images/headstage-64_1r3_tether_short.jpg" style="height: 200px;" />
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are multiple headstage hardware revisions. The revision number is printed
on the PCB. You can use the <a class="reference external" href="https://docs.google.com/spreadsheets/d/1LwEOlOkL_HJKeTmNJFVIlItzVeCZDzOt_9Up_rA36Ic/edit?usp=sharing">compatibility matrix</a>
to find host hardware for your headstage.</p>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>64 analog ephys channels and 3 auxiliary channels sampled at 30 kHz per channel</p></li>
<li><p>A BNO055 9-axis IMU for real-time, 3D orientation tracking</p></li>
<li><p>Four TS4231 light to digital converters for real-time, 3D position tracking
with HTC Vive base stations</p></li>
<li><p>An electrical stimulator (current controlled, +/-15V compliance, automatic electrode</p></li>
<li><p>discharge)</p></li>
<li><p>Two optical stimulators (800 mA per channel)</p></li>
<li><p>An Intel MAX10 FPGA for real-time data arbitration</p></li>
</ul>
<img alt="ONIX Headstage-64 v1.1." class="align-center" src="../../../_images/headstage-64.png" />
<p>Data Link Serializaiton</p>
<p>For details on data serialiation and headstage gateware, have a look at the
<a class="reference internal" href="../serialization.html#serialization"><span class="std std-ref">Coaxial Data Serialization &amp; Power</span></a> page, which describes how coax headstages operatate in
general terms. Headstage-64 has the following coaxial link properties:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 18%" />
<col style="width: 29%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Min</p></th>
<th class="head"><p>Max</p></th>
<th class="head"><p>Unit/
Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FPGA</p></td>
<td><p>Intel 10M08DFV81</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Serializer</p></td>
<td><p>TI DS90UB933</p></td>
<td></td>
<td></td>
<td><p>Coaxial</p></td>
</tr>
<tr class="row-even"><td><p>Supply Voltage</p></td>
<td><p>5.0</p></td>
<td><p>5.0</p></td>
<td><p>6.3*</p></td>
<td><p>Volts</p></td>
</tr>
<tr class="row-odd"><td><p>Hub Clock Frequency</p></td>
<td><p>42</p></td>
<td></td>
<td></td>
<td><p>MHz</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>*Do not exceed 6.3 VDC at the coaxial input to the headstage. Make
sure you make this measurement at the headstage (see: :ref: <cite>Measuring headstage voltage</cite>) to
account for a potential voltage drop in the tether. Exceeding this voltage can
permanently damage the
headstage.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Have a look at the <a class="reference internal" href="../tethers.html#tethers"><span class="std std-ref">Making Coaxial Tethers</span></a> page for more detials on mirco-coax
headstage tethers</p>
</div>
</div>
<div class="section" id="electrophysiology">
<h2>Electrophysiology<a class="headerlink" href="#electrophysiology" title="Permalink to this headline">¶</a></h2>
<p>headstage-64 v1.3 uses a 64-channel, BGA-packaged <a class="reference external" href="https://intantech.com/">Intan RHD2164</a> bioamplifier chip. This chip provides:</p>
<ul class="simple">
<li><p>64 high-bandwidth electrode channels which are exposed via a mezzanine
connector on the bottom of the headstage and can be used to record from most
types of passive probes (e.g. tetrodes, silicon probe arrays, tungsten
microwires, steel EEG wires, etc)</p></li>
<li><p>3 auxiliary channels</p>
<ul>
<li><p>AUX 1 and 2 are pinned out on the bottom of the headstage to an unpopulated
mezzanine connector and solder-able test points</p></li>
<li><p>Channel 3 is tied to the electrical stimulator’s current measurement
circuit via a selectable solder jumper on the bottom of the board. This
jumper can be desoldered and instead a series resistor added to allow
low-frequency LFP recordings as per pg. 26 of the RHD2000 datasheet.</p></li>
</ul>
</li>
</ul>
<p>Each of these channels is sampled at 30 kHz.</p>
</div>
<div class="section" id="d-position-tracking">
<h2>3D Position Tracking<a class="headerlink" href="#d-position-tracking" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>TODO: Move this into its own page</p>
</div>
<p>headstage-64 v1.3 has four <a class="reference external" href="https://store.steampowered.com/steamvr">SteamVR</a>
receivers for 3D position tracking.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These receivers are compatible with both V1 and V2 (“index” branded)
basestations. Although the firmware we supply for the headstage can be used
to obtain 3D position from kinds of basestation, we consider V1
basestations deprecated and cannot guarantee future functionality.</p>
</div>
<p>Assuming you are using <a class="reference external" href="https://store.steampowered.com/app/1059570/Valve_Index_Base_Station/">V2
basestations</a>,
to set up tracking,</p>
<ol class="arabic simple">
<li><p>Mount each of the basestations so that they have a clear line of sight to as
much of the behavioral space as possible. For a relatively flat arena, the
simplest configuration is to mount two basestations directly above the
behavioral space inline and separated by 0.5 to 1 meters. For more complex
environments more than 2 basestations are required to get full coverage, any
configuration is possible so long 2 basestations have a line of site to the
headstage and are no more than 4 meters away. For this, there are lots of
options for ready-made, adjustable basestation mounts availble on Amazon and
elsewhere.</p></li>
<li><p>Serial into each of the basestations using the USB connection on the back
and set up a terminal connection using <code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">/dev/ttyACM0</span> <span class="pre">115200</span></code> or
similar</p></li>
<li><p>Once connected you can hit Tab to see commands</p></li>
<li><p>Set the mode of of each base staiton to a different value using
<code class="docutils literal notranslate"><span class="pre">mode</span> <span class="pre">n</span></code> where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the desired mode (1-16). The only requirement is
that each basestation have a unique mode.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a basestation loses power, it will reset to mode 1. Its best to
just leave the basestations plugged in and untouched to minimize the need to
for re-calibration and mode programming</p>
</div>
<ol class="arabic simple">
<li><p>TODO: obtain the position and orientation of each basestations</p></li>
</ol>
</div>
<div class="section" id="d-orientation-tracking">
<h2>3D Orientation Tracking<a class="headerlink" href="#d-orientation-tracking" title="Permalink to this headline">¶</a></h2>
<p>headstage-64 v1.3 has a <a class="reference external" href="https://www.bosch-sensortec.com/products/smart-sensors/bno055.html">BNO055</a> 9-axis
inertial measurement unit that provides the absolute orientation of the
headstage. This device produces orientation (and other) measurements are 100
Hz.</p>
</div>
<div class="section" id="neural-stimulation">
<h2>Neural Stimulation<a class="headerlink" href="#neural-stimulation" title="Permalink to this headline">¶</a></h2>
<p>headstage-64 provides onboard electrical and optical stimulatus generators.
Stimulus trains can be parameterized in a similar way to the master-8 or pulse
pal.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To achieve the shortest latency, electrical or optical stimulation can be triggered
using the GPIO1 serializer output. Because both stimulators share this trigger line,
it is important to only enable one of the devices (using its ENABLE register) prior
to toggling this pin.</p>
</div>
<div class="section" id="optical-stimulation">
<h3>Optical Stimulation<a class="headerlink" href="#optical-stimulation" title="Permalink to this headline">¶</a></h3>
<p>Optical stimulation is provided by a dual-channel, high-current LED driver.
This driver can be used for LEDs or laser diodes. It provides 800-mA per
channel.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Q</dt>
<dd class="field-odd"><p>Can I parallel the Cathode connections to increase max current?</p>
</dd>
<dt class="field-even">A</dt>
<dd class="field-even"><p>Yes. The maximum peak current in 1.6 Amps. However, if you deliver this
current for a significant amount of time, the headstage will shutdown due
to an over-temperture condition. The optical stimulator is only appropriate
for low duty-cycle pulse-type stimulation.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="electical-stimulation">
<h3>Electical Stimulation<a class="headerlink" href="#electical-stimulation" title="Permalink to this headline">¶</a></h3>
<p>The electrical stimulation cicuit is an improved Howland current pump followed by
an precision current measurement circuit. The current pump is supplied by +/-15V
rails and can supply up to +/- 2.5 mA. The output current is defined as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ISTIM = (VDAC  - 2.5)/1000.
e.g.
VDAC = 2.5   -&gt; ISTIM = 0
VDAC = 5.0   -&gt; ISTIM = 2.5 mA
VDAC = 0.0   -&gt; ISTIM = -2.5mA
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Imeas = 400 * ISTIM + 1.25V
e.g.
ISTIM = 0      -&gt; IMEAS = 1.25V
ISTIM = 2.5mA  -&gt; IMEAS = 2.25V
ISTIM = -2.5mA -&gt; IMEAS = 0.25V
</pre></div>
</div>
</div>
</div>
<div class="section" id="schematic">
<h2>Schematic<a class="headerlink" href="#schematic" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/headstage-64_schematic.png" class="align-center" src="../../../_images/headstage-64_schematic.png" />
</div>
<div class="section" id="gerber-files">
<h2>Gerber Files<a class="headerlink" href="#gerber-files" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/headstage-64_gerbers.png" class="img-fluid" src="../../../_images/headstage-64_gerbers.png" />
</div>
<div class="section" id="bill-of-materials">
<h2>Bill of Materials<a class="headerlink" href="#bill-of-materials" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The interactive BOM is <a class="reference external" href="../../../_static/boms/headstage-64_1r3_bom.html">here</a></p></li>
<li><p>The complete BOM (including vendor part numbers) is located on <a class="reference external" href="https://docs.google.com/spreadsheets/d/1F-KWcdvH_63iXjZf0cgCfDiFX6XXW3qw6rlR8DZrFpQ/edit#gid=138167638">this google
sheet</a></p></li>
</ul>
</div>
<div class="section" id="fpga-bottom-connector-pinouts">
<h2>FPGA &amp; Bottom Connector Pinouts<a class="headerlink" href="#fpga-bottom-connector-pinouts" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The FPGA pinout is located on <a class="reference external" href="https://docs.google.com/spreadsheets/d/1oJoQ89dJNL9LIiTrRnwJ_9KGiLzJ53Tju5Lfchuvsb0/edit#gid=2100166621">this Google sheet</a></p></li>
<li><p>The headstage connector pinout (ADC input mapping, stimulation connections,
etc) is located on <a class="reference external" href="https://docs.google.com/spreadsheets/d/11wRDYOqHN5lPb03yUdfXfK0zvaDYsVetplaNK-R90Gg/edit#gid=663991061">this Google sheet</a> the <a class="reference internal" href="../../../support.html#support"><span class="std std-ref">Contact</span></a> page.</p></li>
</ul>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../tethers.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Making Coaxial Tethers</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="test-board-64.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Test Board for Headstage-64</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2010-2022, Open Ephys &amp; Contributors.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>